{% extends 'layout/base.html' %}
{% load static %}
{% block content %}
    <link rel="stylesheet" href='{% static "css/home.css" %}'>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:wght@400;700&display=swap" rel="stylesheet">

    <div class="row justify-content-center mt-10">
        <div class="col-md-11">
            <p class="text-light page-titles">Home / Bio</p>
            <hr class="page-divider">
        </div>
    </div>

    <!-- Second Section -->
    <div class="row justify-content-center">
        <div class="col-md-11">
            <div class="row" style="margin-left: 0;">
                <div class="col col-hb" style="padding-left: 0;">
                    <span class="text-light page-col-titles">Pages</span>
                    <hr class="page-divider">

                    <nav class="nav flex-column">
                        <a class="nav-link" href="/home">Home</a>
                        <a class="nav-link" href="/about">About</a>
                        <a class="nav-link" href="/search">Search</a>
                        <a class="nav-link" href="/privacy-policy">Privacy Policy</a>
                        <a class="nav-link" href="login">Login / register</a>
                        <a class="nav-link" href="all-publications">Publications</a>
                        <a class="nav-link" href="/articles/">Blogs / Photo Essays</a>
                        <a class="nav-link" href="cart">Shopping Cart</a>
                        <a class="nav-link" href="/contact">Contact / Bookings</a>
                        <a class="nav-link" href="/complaints-policy">Complaints Policy</a>
                    </nav>
                </div>
    
                <div class="col col-hb" style="padding-left: 0;">
                    <span class="text-light page-col-titles">Bio</span>
                    <hr class="page-divider">
                    
                    <img id="author_image" src="{% static 'images/bio.jpg' %}" alt="Site Owner Bio" style="width: 100%;">
                    <div class="blog-bio-container">
                        {{bio.bio | safe}}
                    </div>
                </div>
    
                <div class="col col-hb" style="padding-left: 0;">
                    <span class="text-light page-col-titles">Education</span>
                    <hr class="page-divider">

                    {{edu | safe}}

                </div>
    
                <div class="col col-hb" style="padding-left: 0;">
                    <span class="text-light page-col-titles">Career Highlights</span>
                    <hr class="page-divider">

                    {{ career | safe }}
                </div>
            </div>
        </div>
    </div>

    <!-- Third Section -->
    <div class="row justify-content-center mt-5">
        <div class="col-md-11">
            <div class="row" style="margin-left: 0;">
                <div class="col-md-4" style="padding-left: 0;"></div>

                <div class="col" style="padding-left: 0;">
                    <hr class="page-divider">
                    <span class="text-light page-col-titles">Latest Reports and Publications</span>
                    <hr class="page-divider">

                    <div class="row mt-3" style="margin-left: 0; margin-left: 0;">

                        {% for pub in publications %}

                        <div class="hover hover-5 text-white rounded col-md-3 mt-3">
                            <a href="/publication/details/{{pub.title}}-{{pub.id}}">
                                <img src="{{ pub.image.url }}" note="blog_image" height="263" alt="report1_klxpyb.png">
                            
                                <div class="hover-overlay"></div>
                                <div class="hover-5-content">
                                    <span class="hover-5-title text-uppercase font-weight-light mb-0">
                                        <span>{{pub.title}}</span>
                                    </span>
                                </div>
                            </a>
                        </div>

                        {% endfor %}
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Fourth Section -->
    <div class="row justify-content-center mt-5">
        <div class="col-md-11" style="min-height: 900px; margin-bottom: 5rem; border-bottom: 1px solid;">
            <span class="text-light" style="font-weight: 600; font-size: 30px;">Research and Articles</span>
            <div class="row" style="margin-left: 0;">
                
                <div class="col-md" style="padding-left: 0;">

                    <ul class="nav nav-tabs mt-3" id="myTab" role="tablist" style="border: none;">
                        <li class="nav-item nav-item-rsa pr-5">
                          <a class="nav-link active rsa" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Latest</a>
                        </li>
                        <li class="nav-item nav-item-rsa pr-5">
                          <a class="nav-link rsa" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Trending</a>
                        </li>
                        <li class="nav-item nav-item-rsa pr-5">
                          <a class="nav-link rsa" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">Most Shares</a>
                        </li>
                      </ul>
                      <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">

                            {% for arti in latest_articles %}
                            
                            <div class="card mt-3" style="background-color: #414141;">
                                <div class="card-body" style="padding: 0;">
                                    <div class="row">
                                        <div class="col-4 article-card-rsa">
                                            <a href="/articles/details/{{arti.title}}-{{arti.id}}">
                                                <img class="img-fluid" note="blog_image" style="width: 200px; height: 150px;" src="{{ arti.image.url }}" alt="">
                                            </a>
                                        </div>

                                        <div class="col-8 article-card-rsa  article-card-rsa-b">
                                            <a href="/articles/details/{{arti.title}}-{{arti.id}}">
                                                <p class="mt-2" style="font-weight: 600; font-size: 18px;">{{arti.title}}</p>
                                            </a>
                                            
                                            <p class="truncated-text">
                                                {{arti.shortDescription}}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {% endfor %}

                        </div>
                        <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                            
                            {% for arti in trending_articles %}
                            
                            <div class="card mt-3" style="background-color: #414141;">
                                <div class="card-body" style="padding: 0;">
                                    <div class="row">
                                        <div class="col-4 article-card-rsa">
                                            <a href="/articles/details/{{arti.title}}-{{arti.id}}">
                                                <img class="img-fluid" note="blog_image" style="width: 200px; height: 150px;" src="{{ arti.image.url }}" alt="">
                                            </a>
                                        </div>

                                        <div class="col-8 article-card-rsa  article-card-rsa-b">
                                            <a href="/articles/details/{{arti.title}}-{{arti.id}}">
                                                <p class="mt-2" style="font-weight: 600; font-size: 18px;">{{arti.title}}</p>
                                            </a>
                                            
                                            <p class="truncated-text">
                                                {{arti.shortDescription}}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {% endfor %}

                        </div>
                        <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                            
                            {% for arti in most_shared_articles %}
                            
                            <div class="card mt-3" style="background-color: #414141;">
                                <div class="card-body" style="padding: 0;">
                                    <div class="row">
                                        <div class="col-4 article-card-rsa">
                                            <a href="/articles/details/{{arti.title}}-{{arti.id}}">
                                                <img class="img-fluid" note="blog_image" style="width: 200px; height: 150px;" src="{{ arti.image.url }}" alt="">
                                            </a>
                                        </div>

                                        <div class="col-8 article-card-rsa  article-card-rsa-b">
                                            <a href="/articles/details/{{arti.title}}-{{arti.id}}">
                                                <p class="mt-2" style="font-weight: 600; font-size: 18px;">{{arti.title}}</p>
                                            </a>
                                            
                                            <p class="truncated-text">
                                                {{arti.shortDescription}}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {% endfor %}

                        </div>
                      </div>
                      
                </div>
                <div class="col-md">
                    <div class="col-md" style="padding-left: 0;">

                        <ul class="nav nav-tabs mt-3" id="myTab1" role="tablist" style="border: none;">
                            <li class="nav-item pr-6">
                              <a class="nav-link active rsa" id="featured-tab" data-toggle="tab" href="#featured" role="tab" aria-controls="featured" aria-selected="true">Featured</a>
                            </li>
                        </ul>

                        <div class="tab-content" id="myTabContent">
                            <div class="tab-pane fade show active" id="featured" role="tabpanel" aria-labelledby="featured-tab">

                                {{featured_articles | safe }}

                                <div class='card mt-3' style='background-color: #000;'>
                                    <div class='card-body' style='padding: 0;'>
                                    <div class='row'>
                                        <div class='col-2'>
                                        </div>
                                        <div class='col-10'>
                                            <a href="/articles/">
                                                <p style='font-size: 18px; margin-top: 25px;'>VIEW ALL NEWS</p>
                                            </a>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Fifth Section -->
                
    {{blogContent | safe}}

    <style>

        .intro_heading{
            font-size: 35px; 
            font-family: Montserrat; 
            font-weight: 600;
        }

        .welcome_img_1{
            display: none;
            width: 40px;
            margin-left: 5rem;
        }

        .welcome_span_1{
            margin-right: 440px;
        }

        .welcome_span_2{
            margin-left: 5rem;
        }

        .intro_welcome{
            float: right;
            font-size: 150px;
            font-family: 'Noto Serif', serif;
            font-weight: 700;
            line-height: 150.87px;
            color: #FE8900;
        }


        .galary-sec-row{
            max-width: 100%;
        }

        .button-container{
            display:inline-block;
            position:relative;
        }

        .button-container a{
            position: absolute;
            margin-top: 85%;
            margin-left: 72%;
            border-radius:1.5em;
            padding:1em 1.5em;
            cursor: pointer;
        }

        .info-graph-row {
            display: flex;
            flex-wrap: wrap;
            padding: 0 4px;
        }

        .info-graph-column {
            flex: 25%;
            max-width: 25%;
            padding: 0 4px;
        }

        .info-graph-column img {
            margin-top: 8px;
            vertical-align: middle;
            width: 100%;
        }

        .info-graph-column img{
            cursor: pointer;
        }


        .modal-fullscreen-xl {
            padding: 0 !important;
        }
        .modal-fullscreen-xl .modal-dialog {
            left: 6%;
            width: 90%;
            max-width: none;
            height: 100%;
            margin: 0;
        }
        .modal-fullscreen-xl .modal-content {
            height: 100%;
            border: 0;
            border-radius: 0;
        }
        .modal-fullscreen-xl .modal-body {
            overflow-y: auto;
        }

        @media screen and (max-width: 800px) {
            .info-graph-column {
                flex: 50%;
                max-width: 50%;
            }
        }

        @media screen and (max-width: 600px) {
            .info-graph-column {
                flex: 100%;
                max-width: 100%;
            }

            .modal-fullscreen-xl .modal-dialog{
                left: 0%;
                width: 100%;
            }

            .intro_heading{
                width: 400px !important;
                font-size: 22px; 
            }

            .intro_div .col-5{
                flex: 0 0 100%;
                max-width: 100%;
            }

            .intro_welcome{
                margin-top: 3rem;
                font-size: 50px;
                line-height: 50.87px;
            }

            .welcome_span_1{
                margin-right: 14rem;
            }

            .welcome_span_2{
                margin-left: 0;
            }

            .sec_text_line{
                margin-top: 8rem;
            }

            .welcome_img_1{
                display: block;
            }

            .welcome_img_2{
                display:none
            }

            .under_br{
                margin-top: -7rem !important;
            }
        }


    </style>

    <!-- Sixth Section -->
    <div class="row justify-content-center mt-5">
        <div class="col-md-11" style="margin-bottom: 3rem;">
            <span class="text-light" style="font-weight: 600; font-size: 30px;">Popular Infographs and Illustrations</span>
            <div class="row" style="margin-left: 0;">
                
                <div class="col-md" style="padding-left: 0;">

                    <ul class="nav nav-tabs mt-3" id="myTab" role="tablist" style="border: none;">
                        <li class="nav-item nav-item-pii pr-6">
                          <a class="nav-link active rsa-sm" id="home-tab" data-toggle="tab" href="#all" role="tab" aria-controls="home" aria-selected="true">All</a>
                        </li>
                        <li class="nav-item nav-item-pii pr-6">
                          <a class="nav-link rsa-sm" id="profile-tab" data-toggle="tab" href="#economic" role="tab" aria-controls="profile" aria-selected="false">Economic</a>
                        </li>
                        <li class="nav-item nav-item-pii pr-6">
                          <a class="nav-link rsa-sm" id="contact-tab" data-toggle="tab" href="#business" role="tab" aria-controls="contact" aria-selected="false">Politics</a>
                        </li>
                        <li class="nav-item nav-item-pii pr-6">
                          <a class="nav-link rsa-sm" id="contact-tab" data-toggle="tab" href="#popular" role="tab" aria-controls="contact" aria-selected="false">Popular</a>
                        </li>
                      </ul>

                      <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="all" role="tabpanel" aria-labelledby="all-tab">

                            <div class="row info-graph-row">
                                
                                {{ most_shared_articles_graph | safe }}
                                
                            </div>
                            
                        </div>


                        <div class="tab-pane fade" id="economic" role="tabpanel" aria-labelledby="all-tab">

                            <div class="row">
                                {{ economics_articles_graph | safe }}
                            </div>
                            
                        </div>


                        <div class="tab-pane fade" id="business" role="tabpanel" aria-labelledby="all-tab">

                            <div class="row">
                                {{ business_articles_graph | safe }}                                
                            </div>
                            
                        </div>


                        <div class="tab-pane fade" id="popular" role="tabpanel" aria-labelledby="all-tab">

                            <div class="row">
                                {{ popular_articles_graph | safe }}
                            </div>
                            
                        </div>
                    </div>

                    <div class="modal fade modal-fullscreen-xl" id="graphicsShareModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                        <div class="modal-content" style="background-color: #fff;">
                            <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            </div>
                            <div class="modal-body">

                                <div class="pl-5 pr-5" style="display: flex; justify-content: center; align-items: center; max-height: 450px; overflow: hidden;">
                                    <img src="" style="width: auto; max-width: 100%; max-height: 450px; height: auto;" class="img-fluid" id="modalImg">
                                </div>

                                <div class="pl-5 pr-5 ml-3">
                                    <h4 class="modal-title" id="exampleModalLabel" style="color: #000;">Share Infograhs</h4>
                                </div>

                                <div class="pl-5 pr-5 ml-3 mt-3">
                                    <p id="description" style="color: #000; font-size: 18px;"></p>
                                </div>
                                
                                <div class="row text-center mt-4">
                                    <div class="col">
                                        <a target="_blank" style="color: #0e8ef1 !important;" class="share-btn ml-4 h4 share-btn-fb" href="" class="fb-xfbml-parse-ignore"><i class="fab fa-facebook"></i></a>

                                        <a target="_blank" style="color: #1d9bf0 !important;" class="share-btn ml-4 h4 share-btn-tw" href="" class="fb-xfbml-parse-ignore"><i class="fab fa-twitter"></i></a>

                                        <a target="_blank" style="color: #0a66c2 !important;" class="share-btn ml-4 h4 share-btn-ln" href="" class="fb-xfbml-parse-ignore"><i class="fab fa-linkedin-in"></i></a>

                                        <input type="hidden" id="mdImgUrl" value="">
                                        <button class="btn text-primary share-btn ml-3 h4 share-btn-copy pt-2">
                                            <i class="fas fa-copy"></i>
                                        </button>

                                    </div>
                                </div>

                            </div>
                        </div>
                        </div>
                    </div>


                    <script>

                        // console.log(screen.width * 0.92);
                        $('.intro_div').css('width', (screen.width * 0.92))
                        
                        function isEmail(email) {
                        var regex = /^([a-zA-Z0-9_.+-])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                        return regex.test(email);
                        }

                        var toastMixin = Swal.mixin({
                            toast: true,
                            icon: 'success',
                            title: 'General Title',
                            animation: false,
                            background: 'black',
                            position: 'top-right',
                            showConfirmButton: false,
                            timer: 3000,
                            timerProgressBar: true,
                            didOpen: (toast) => {
                            toast.addEventListener('mouseenter', Swal.stopTimer)
                            toast.addEventListener('mouseleave', Swal.resumeTimer)
                            }
                        });

                        function copyClipBorad() {
                            var copyText = document.getElementById("mdImgUrl");
                            navigator.clipboard.writeText(copyText.value);

                            toastMixin.fire({
                                animation: true,
                                title: 'Image url copied to clipboard'
                            });
                        }
                        
                        $(".info-graph-share").click(function(){

                            img_url = $(this).attr("img_url");
                            title = $(this).attr("title");
                            short_description = $(this).attr("short_description");

                            $("#mdImgUrl").val(img_url);

                            $(".share-btn-fb").attr("href", "https://www.facebook.com/sharer/sharer.php?u="+img_url)
                            $(".share-btn-tw").attr("href", "https://twitter.com/intent/tweet?text="+img_url)
                            $(".share-btn-ln").attr("href", "https://www.linkedin.com/sharing/share-offsite/?url="+img_url)

                            $("#exampleModalLabel").text(title);

                            $("#modalImg").attr("src", img_url);

                            $("#description").html(short_description);

                            // $(".sendInfographBtn").attr("img_url", img_url);

                        });

                        $('.sendInfographBtn').on('click', function (event) {

                            img_url = $(this).attr("img_url");

                            var email = $("#infoGraphEmail").val();
                            var emailBody = '<img src="'+img_url+'">';
                            var subject = "Anan Blog InfoGraphics"

                            if (isEmail(email) == true){
                                $(".infoGraphEmailErr").text("");
                                window.location = 'mailto:' + email + '?subject=' + subject + '&body=' +   emailBody;
                            }else{
                                $(".infoGraphEmailErr").text("Invalid Email");
                            }

                        });

                        $(".share-btn-copy").click(function(){
                            copyClipBorad();
                        });
                    </script>

                </div>
            </div>
        </div>
    </div>

{% endblock %}